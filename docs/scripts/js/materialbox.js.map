{"version":3,"sources":["js/materialbox.js"],"names":["$","fn","materialbox","each","hasClass","addClass","overlayActive","doneAnimating","inDuration","outDuration","origin","placeholder","originalWidth","originalHeight","ancestorsChanged","ancestor","wrap","on","parent","windowWidth","window","innerWidth","windowHeight","innerHeight","width","height","returnToOriginal","css","getBoundingClientRect","position","top","left","undefined","parentNode","count","is","document","curr","add","data","overlay","opacity","click","before","overlayOffset","velocity","duration","queue","easing","$photo_caption","text","append","ratio","widthPercent","heightPercent","newWidth","newHeight","complete","scrollLeft","offset","scrollTop","scroll","keyup","e","keyCode","remove","removeClass","ready","jQuery"],"mappings":"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","file":"materialbox.js","sourcesContent":["(function ($) {\n\n  $.fn.materialbox = function () {\n\n    return this.each(function() {\n\n      if ($(this).hasClass('initialized')) {\n        return;\n      }\n\n      $(this).addClass('initialized');\n\n      var overlayActive = false;\n      var doneAnimating = true;\n      var inDuration = 275;\n      var outDuration = 200;\n      var origin = $(this);\n      var placeholder = $('<div></div>').addClass('material-placeholder');\n      var originalWidth = 0;\n      var originalHeight = 0;\n      var ancestorsChanged;\n      var ancestor;\n      origin.wrap(placeholder);\n\n\n      origin.on('click', function(){\n        var placeholder = origin.parent('.material-placeholder');\n        var windowWidth = window.innerWidth;\n        var windowHeight = window.innerHeight;\n        var originalWidth = origin.width();\n        var originalHeight = origin.height();\n\n\n        // If already modal, return to original\n        if (doneAnimating === false) {\n          returnToOriginal();\n          return false;\n        }\n        else if (overlayActive && doneAnimating===true) {\n          returnToOriginal();\n          return false;\n        }\n\n\n        // Set states\n        doneAnimating = false;\n        origin.addClass('active');\n        overlayActive = true;\n\n        // Set positioning for placeholder\n        placeholder.css({\n          width: placeholder[0].getBoundingClientRect().width,\n          height: placeholder[0].getBoundingClientRect().height,\n          position: 'relative',\n          top: 0,\n          left: 0\n        });\n\n        // Find ancestor with overflow: hidden; and remove it\n        ancestorsChanged = undefined;\n        ancestor = placeholder[0].parentNode;\n        var count = 0;\n        while (ancestor !== null && !$(ancestor).is(document)) {\n          var curr = $(ancestor);\n          if (curr.css('overflow') !== 'visible') {\n            curr.css('overflow', 'visible');\n            if (ancestorsChanged === undefined) {\n              ancestorsChanged = curr;\n            }\n            else {\n              ancestorsChanged = ancestorsChanged.add(curr);\n            }\n          }\n          ancestor = ancestor.parentNode;\n        }\n\n        // Set css on origin\n        origin.css({\n          position: 'absolute',\n          'z-index': 1000,\n          'will-change': 'left, top, width, height'\n        })\n        .data('width', originalWidth)\n        .data('height', originalHeight);\n\n        // Add overlay\n        var overlay = $('<div id=\"materialbox-overlay\"></div>')\n          .css({\n            opacity: 0\n          })\n          .click(function(){\n            if (doneAnimating === true)\n            returnToOriginal();\n          });\n\n        // Put before in origin image to preserve z-index layering.\n        origin.before(overlay);\n\n        // Set dimensions if needed\n        var overlayOffset = overlay[0].getBoundingClientRect();\n        overlay.css({\n          width: windowWidth,\n          height: windowHeight,\n          left: -1 * overlayOffset.left,\n          top: -1 * overlayOffset.top\n        })\n\n        // Animate Overlay\n        overlay.velocity({opacity: 1},\n                           {duration: inDuration, queue: false, easing: 'easeOutQuad'} );\n\n        // Add and animate caption if it exists\n        if (origin.data('caption') !== \"\") {\n          var $photo_caption = $('<div class=\"materialbox-caption\"></div>');\n          $photo_caption.text(origin.data('caption'));\n          $('body').append($photo_caption);\n          $photo_caption.css({ \"display\": \"inline\" });\n          $photo_caption.velocity({opacity: 1}, {duration: inDuration, queue: false, easing: 'easeOutQuad'});\n        }\n\n        // Resize Image\n        var ratio = 0;\n        var widthPercent = originalWidth / windowWidth;\n        var heightPercent = originalHeight / windowHeight;\n        var newWidth = 0;\n        var newHeight = 0;\n\n        if (widthPercent > heightPercent) {\n          ratio = originalHeight / originalWidth;\n          newWidth = windowWidth * 0.9;\n          newHeight = windowWidth * 0.9 * ratio;\n        }\n        else {\n          ratio = originalWidth / originalHeight;\n          newWidth = (windowHeight * 0.9) * ratio;\n          newHeight = windowHeight * 0.9;\n        }\n\n        // Animate image + set z-index\n        if(origin.hasClass('responsive-img')) {\n          origin.velocity({'max-width': newWidth, 'width': originalWidth}, {duration: 0, queue: false,\n            complete: function(){\n              origin.css({left: 0, top: 0})\n              .velocity(\n                {\n                  height: newHeight,\n                  width: newWidth,\n                  left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,\n                  top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2\n                },\n                {\n                  duration: inDuration,\n                  queue: false,\n                  easing: 'easeOutQuad',\n                  complete: function(){doneAnimating = true;}\n                }\n              );\n            } // End Complete\n          }); // End Velocity\n        }\n        else {\n          origin.css('left', 0)\n          .css('top', 0)\n          .velocity(\n            {\n              height: newHeight,\n              width: newWidth,\n              left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,\n              top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2\n            },\n            {\n              duration: inDuration,\n              queue: false,\n              easing: 'easeOutQuad',\n              complete: function(){doneAnimating = true;}\n            }\n            ); // End Velocity\n        }\n\n      }); // End origin on click\n\n\n      // Return on scroll\n      $(window).scroll(function() {\n        if (overlayActive) {\n          returnToOriginal();\n        }\n      });\n\n      // Return on ESC\n      $(document).keyup(function(e) {\n\n        if (e.keyCode === 27 && doneAnimating === true) {   // ESC key\n          if (overlayActive) {\n            returnToOriginal();\n          }\n        }\n      });\n\n\n      // This function returns the modaled image to the original spot\n      function returnToOriginal() {\n\n        doneAnimating = false;\n\n        var placeholder = origin.parent('.material-placeholder');\n        var windowWidth = window.innerWidth;\n        var windowHeight = window.innerHeight;\n        var originalWidth = origin.data('width');\n        var originalHeight = origin.data('height');\n\n        origin.velocity(\"stop\", true);\n        $('#materialbox-overlay').velocity(\"stop\", true);\n        $('.materialbox-caption').velocity(\"stop\", true);\n\n\n        $('#materialbox-overlay').velocity({opacity: 0}, {\n          duration: outDuration, // Delay prevents animation overlapping\n          queue: false, easing: 'easeOutQuad',\n          complete: function(){\n            // Remove Overlay\n            overlayActive = false;\n            $(this).remove();\n          }\n        });\n\n        // Resize Image\n        origin.velocity(\n          {\n            width: originalWidth,\n            height: originalHeight,\n            left: 0,\n            top: 0\n          },\n          {\n            duration: outDuration,\n            queue: false, easing: 'easeOutQuad'\n          }\n        );\n\n        // Remove Caption + reset css settings on image\n        $('.materialbox-caption').velocity({opacity: 0}, {\n          duration: outDuration, // Delay prevents animation overlapping\n          queue: false, easing: 'easeOutQuad',\n          complete: function(){\n            placeholder.css({\n              height: '',\n              width: '',\n              position: '',\n              top: '',\n              left: ''\n            });\n\n            origin.css({\n              height: '',\n              top: '',\n              left: '',\n              width: '',\n              'max-width': '',\n              position: '',\n              'z-index': '',\n              'will-change': ''\n            });\n\n            // Remove class\n            origin.removeClass('active');\n            doneAnimating = true;\n            $(this).remove();\n\n            // Remove overflow overrides on ancestors\n            if (ancestorsChanged) {\n              ancestorsChanged.css('overflow', '');\n            }\n          }\n        });\n\n      }\n    });\n  };\n\n  $(document).ready(function(){\n    $('.materialboxed').materialbox();\n  });\n\n}( jQuery ));\n"]}